<div class="page tab-onboard-logging">
    <div class="page-header">
        <span data-i18n="tabOnboardLogging"></span>
    </div>

    <div class="require-blackbox-unsupported">
        <div class="alert alert-info">
            <div class="fw-bold" data-i18n="blackboxNotSupported"></div>
            <div class="hstack py-4">
                <div class="form-check form-switch">
                    <input class="form-check-input feature" type="checkbox" data-bit="19" name="BLACKBOX" title="BLACKBOX" id="feature-19-1"/>
                    <label for="feature-19-1" class="form-check-label" data-i18n="featureBLACKBOX"></label>
                </div>
            </div>
            <div>
                <button id="save-blackbox-feature" class="btn btn-primary" data-i18n="blackboxButtonSave"></button>
            </div>
        </div>
    </div>

    <div class="require-blackbox-supported">
        <div class="row">
            <div class="col">
                <div class="card mb-3">
                    <div class="card-header" data-i18n="blackboxConfiguration"></div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item hstack">
                                <div class="form-check form-switch">
                                    <input class="form-check-input feature" checked type="checkbox" data-bit="19" name="BLACKBOX" title="BLACKBOX" id="feature-19-2"/>
                                    <label for="feature-19-2" class="form-check-label" data-i18n="featureBLACKBOX"></label>
                                </div>
                            </li>
                            <li class="list-group-item hstack line blackboxDevice">
                                <select class="form-select w-10r" name="blackbox_device"></select>
                                <label i18n="onboardLoggingBlackbox"></label>
                            </li>
                            <li class="list-group-item hstack line blackboxRate">
                                <select class="form-select w-10r" name="blackbox_rate"></select>
                                <label i18n="onboardLoggingBlackboxRate"></label>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="card mb-3">
                    <div class="card-header" data-i18n="serialLogging"></div>
                    <div class="card-body">
                        <div data-i18n="serialLoggingSupportedNote"></div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card mb-3">
                    <div class="card-header" data-i18n="blackboxFields"></div>
                    <div class="card-body">
                        <ul id="blackBoxFlagsDiv" class="list-group list-group-flush"></ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mb-3 require-dataflash-supported">
            <div class="card-header" data-i18n="onboardLoggingFlashLogger"></div>
            <div class="card-body">
                <div class="require-dataflash-supported">
                    <p data-i18n="dataflashNote"></p>

                    <div class="progress h-2r">
                        <div id="dataflash-used-memory-percent" class="progress-bar"></div>
                    </div>
                    <div class="d-flex justify-content-between pt-2 pb-3">
                        <div>
                            <span id="dataflash-used-memory"></span>
                            <span data-i18n="sdcardMemoryUsedOf"></span>
                            <span id="dataflash-all-memory"></span>
                        </div>
                        <div>
                            <span data-i18n="sdcardMemoryAvailable"></span>: <span id="dataflash-available-memory"></span>
                        </div>
                    </div>
                    <div>
                        <button id="btn-erase-flash" class="btn btn-outline-danger" data-i18n="dataflashButtonErase"></button>
                        <button id="btn-save-flash" class="btn btn-outline-primary" data-i18n="dataflashButtonSaveFile"></button>
                    </div>



                    <dialog class="dataflash-confirm-erase">
                        <h3 data-i18n="dataflashConfirmEraseTitle"></h3>
                        <p class="dataflash-confirm-erase-note" data-i18n="dataflashConfirmEraseNote"></p>
                        <div class="dataflash-erase-progress">
                            <div class="data-loading">
                                <p data-i18n="dataflashEraseing"></p>
                            </div>
                        </div>
                        <div>
                            <button id="btn-erase-flash-confirm" class="btn btn-danger erase-flash-confirm" data-i18n="dataflashButtonEraseConfirm"></button>
                            <button id="btn-erase-flash-cancel" class="btn btn-primary erase-flash-cancel" data-i18n="dataflashButtonEraseCancel"></button>
                        </div>
                    </dialog>

                    <dialog class="dataflash-saving">
                        <h3 data-i18n="dataflashSavingTitle"></h3>
                        <div class="dataflash-saving-before">
                            <p data-i18n="dataflashSavingNote"></p>

                            <div class="progress mb-3" style=" --inav-progress-bar-transition: width 0.15s ease;">
                                <div id="dataflash-saving-progress" class="progress-bar" style="width: 0%"></div>
                            </div>

                            <div>
                                <button id="btn-save-flash-cancel" class="btn btn-primary" data-i18n="dataflashButtonSaveCancel"></button>
                            </div>
                        </div>
                        <div class="dataflash-saving-after">
                            <p data-i18n="dataflashSavingNoteAfter"></p>
                            <div>
                                <button id="btn-save-flash-dismiss" class="btn btn-primary" data-i18n="dataflashButtonSaveDismiss"></button>
                            </div>
                        </div>
                    </dialog>
                </div>

                <p class="require-dataflash-not-present" data-i18n="dataflashNotPresentNote"></p>
                <p class="require-dataflash-unsupported" data-i18n="dataflashFirmwareUpgradeRequired"></p>
            </div>
        </div>

        <div class="card mb-3 require-sdcard-supported">
            <div class="card-header" data-i18n="OnboardSDCard"></div>
            <div class="card-body">
                <div class="hstack gap-3">
                    <div class="sdcard p-3 vstack flex-grow-0 align-items-center gap-2">
                        <div class="sdcard-icon rounded-circle bg-secondary"></div>
                        <div class="sdcard-status text-center"></div>
                    </div>
                    <div class="flex-grow-1">
                        <p data-i18n="sdcardNote"></p>
                        <div class="require-sdcard-ready">
                            <div class="progress h-2r">
                                <div id="sdcard-used-memory-percent" class="progress-bar"></div>
                            </div>
                            <div class="d-flex justify-content-between pt-2 pb-3">
                                <div>
                                    <span id="sdcard-used-memory"></span>
                                    <span data-i18n="sdcardMemoryUsedOf"></span>
                                    <span id="sdcard-all-memory"></span>
                                </div>
                                <div>
                                    <span data-i18n="sdcardMemoryAvailable"></span>: <span id="sdcard-available-memory"></span>
                                </div>
                            </div>
                            <div>
                                <button class="btn btn-primary" i18n="cliMscBtn" disabled></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="page-footer">
        <button id="save-btn" class="btn btn-primary" data-i18n="blackboxButtonSave"></button>
    </div>
</div>
