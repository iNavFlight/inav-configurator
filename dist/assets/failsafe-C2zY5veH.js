import{T as d,G as i,M as f,d as s,_ as S,n as p,i as _,$ as e,F as n,m as I}from"./index--BqaKNiR.js";d.failsafe={};d.failsafe.initialize=function(t,l){i.active_tab!="failsafe"&&(i.active_tab="failsafe");function u(){f.send_message(s.MSP_FAILSAFE_CONFIG,!1,!1,m)}function m(){S(async()=>{const{default:c}=await import("./failsafe-k1OTxVVh.js");return{default:c}},[],import.meta.url).then(({default:c})=>i.load(c,p.processHtml(function(){switch(i.simpleBind(),_.localize(),e("#content").scrollTop(l||0),e('input[type="radio"].procedure').on("change",function(){var r=e(this),o=r.is(":checked"),F=r.attr("id");switch(F){case"drop":o&&(e('input[name="failsafe_throttle"]').prop("disabled",!0),e('input[name="failsafe_off_delay"]').prop("disabled",!0));break;case"land":o&&(e('input[name="failsafe_throttle"]').prop("disabled",!1),e('input[name="failsafe_off_delay"]').prop("disabled",!1));break}}),n.FAILSAFE_CONFIG.failsafe_procedure){default:case 0:var a=e('input[id="land"]');a.prop("checked",!0),a.trigger("change");break;case 1:var a=e('input[id="drop"]');a.prop("checked",!0),a.trigger("change");break;case 2:var a=e('input[id="rth"]');a.prop("checked",!0),a.trigger("change");break;case 3:var a=e('input[id="nothing"]');a.prop("checked",!0),a.trigger("change");break}e("#failsafe_use_minimum_distance").on("change",function(){e(this).is(":checked")?(e("#failsafe_min_distance_elements").show(),e("#failsafe_min_distance_procedure_elements").show()):(e("#failsafe_min_distance").val(0),e("#failsafe_min_distance_elements").hide(),e("#failsafe_min_distance_procedure_elements").hide())}),e("#failsafe_min_distance").val()>0?(e("#failsafe_use_minimum_distance").prop("checked",!0),e("#failsafe_min_distance_elements").show(),e("#failsafe_min_distance_procedure_elements").show()):(e("#failsafe_use_minimum_distance").prop("checked",!1),e("#failsafe_min_distance_elements").hide(),e("#failsafe_min_distance_procedure_elements").hide()),e("a.save").on("click",function(){e('input[id="land"]').is(":checked")?n.FAILSAFE_CONFIG.failsafe_procedure=0:e('input[id="drop"]').is(":checked")?n.FAILSAFE_CONFIG.failsafe_procedure=1:e('input[id="rth"]').is(":checked")?n.FAILSAFE_CONFIG.failsafe_procedure=2:e('input[id="nothing"]').is(":checked")&&(n.FAILSAFE_CONFIG.failsafe_procedure=3),f.send_message(s.MSP_SET_FAILSAFE_CONFIG,I.crunch(s.MSP_SET_FAILSAFE_CONFIG),!1,g)}),i.content_ready(t)})))}u();function h(){console.log("save_to_eeprom"),f.send_message(s.MSP_EEPROM_WRITE,!1,!1,function(){i.log(_.getMessage("eepromSaved")),i.tab_switch_cleanup(function(){f.send_message(s.MSP_SET_REBOOT,!1,!1,function(){i.log(_.getMessage("deviceRebooting")),i.handleReconnect(e(".tab_failsafe a"))})})})}function g(){p.saveInputs(h)}};d.failsafe.cleanup=function(t){t&&t()};
