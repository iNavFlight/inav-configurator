import{T as f,G as E,M,d as P,_ as x,i as X,$ as i,F as r,m as W}from"./index--BqaKNiR.js";f.led_strip={wireMode:!1,directions:["n","e","s","w","u","d"]};f.led_strip.initialize=function(D,I){var h=null,C=null;f.led_strip.functions=["i","w","f","a","t","r","c","g","s","b","l","o","n"],f.led_strip.baseFuncs=["c","f","a","l","s","g","r","h"],f.led_strip.overlays=["t","o","b","n","i","w","e"],f.led_strip.wireMode=!1,E.active_tab!="led_strip"&&(E.active_tab="led_strip");function z(){M.send_message(P.MSP2_INAV_LED_STRIP_CONFIG_EX,!1,!1,Y)}function Y(){M.send_message(P.MSP_LED_COLORS,!1,!1,J)}function J(){M.send_message(P.MSP_LED_STRIP_MODECOLOR,!1,!1,K)}function K(){x(async()=>{const{default:e}=await import("./led_strip-Ct4GaZn4.js");return{default:e}},[],import.meta.url).then(({default:e})=>E.load(e,Q))}z();function q(){var e=[];return i(".mainGrid .gPoint .wire").each(function(){var n=parseInt(i(this).html());n>=0&&e.push(n)}),e.sort(function(n,s){return n-s}),e}function Q(){X.localize();for(var e=[],n=0,s=0;s<256;s++)e[n++]='<div class="gPoint"><div class="indicators"><span class="north"></span><span class="south"></span><span class="west"></span><span class="east"></span><span class="up">U</span><span class="down">D</span></div><span class="wire"></span><span class="overlay-t"> </span><span class="overlay-o"> </span><span class="overlay-b"> </span><span class="overlay-n"> </span><span class="overlay-w"> </span><span class="overlay-i"> </span><span class="overlay-color"> </span></div>';i(".mainGrid").html(e.join("")),i(".tempOutput").on("click",function(){i(this).select()}),i(".funcClear").on("click",function(){i(".gPoint").each(function(){i(this).is(".ui-selected")&&(u(this),i(this).find(".wire").html(""))}),i(".controls button").removeClass("btnOn"),p()}),i(".funcClearAll").on("click",function(){i(".gPoint").each(function(){u(this)}),i(".gPoint .wire").html(""),p(),i(".controls button").removeClass("btnOn")});function u(c){var o=[];f.led_strip.baseFuncs.forEach(function(t){o.push("function-"+t)}),f.led_strip.overlays.forEach(function(t){o.push("function-"+t)}),f.led_strip.directions.forEach(function(t){o.push("dir-"+t)}),i(c).removeClass(o.join(" "))}i(".directions").on("click","button",function(){var c=this;i(".ui-selected").length>0&&(f.led_strip.directions.forEach(function(o){i(c).is(".dir-"+o)&&(i(c).is(".btnOn")?(i(c).removeClass("btnOn"),i(".ui-selected").removeClass("dir-"+o)):(i(c).addClass("btnOn"),i(".ui-selected").addClass("dir-"+o)))}),y(),p())}),i(".mode_colors").on("click","button",function(){var c=this;r.LED_MODE_COLORS.forEach(function(o){if(i(c).is(".mode_color-"+o.mode+"-"+o.direction))if(i(c).is(".btnOn"))i(c).removeClass("btnOn"),i(".ui-selected").removeClass("mode_color-"+o.mode+"-"+o.direction),C=null;else{i(c).addClass("btnOn"),C={mode:o.mode,direction:o.direction};for(var t=0;t<16;t++){var a=".color-"+t;t==$(o.mode,o.direction)?(i(a).addClass("btnOn"),h=t,F(t)):i(a).removeClass("btnOn")}}}),i(".mode_colors").each(function(){i(this).children().each(function(){i(this).is(i(c))||i(this).is(".btnOn")&&i(this).removeClass("btnOn")})}),p()});var m=i("div.colorDefineSliders input");m.eq(0).on("input change",function(){k(i(this).val(),0)}),m.eq(1).on("input change",function(){k(i(this).val(),1)}),m.eq(2).on("input change",function(){k(i(this).val(),2)});for(var s=0;s<3;s++)k(m.eq(s).val(),s);i(".colors").on("click","button",function(c){for(var o=this,t=i(this).parent().find("button"),a=0;a<16;a++)t.removeClass("btnOn"),C==null&&i(".ui-selected").removeClass("color-"+a),i(o).is(".color-"+a)&&(h=a,C==null&&i(".ui-selected").addClass("color-"+a));F(h),i(this).addClass("btnOn"),C&&j(C.mode,C.direction,h),N(),i(".colors").children().each(function(){w(i(this))}),i(".overlay-color").each(function(){w(i(this))}),i(".mode_colors").each(function(){L(i(this))}),i(".special_colors").each(function(){L(i(this))}),p()}),i(".colors").on("dblclick","button",function(c){var o=i(".tab-led-strip").offset().left+i(".colorDefineSliders").width()/2,t=i(".tab-led-strip").offset().top+i(".colorDefineSliders").height()+20;i(".colorDefineSliders").css("left",c.pageX-c.offsetX-o),i(".colorDefineSliders").css("top",c.pageY-c.offsetY-t),i(".colorDefineSliders").show()}),i(".colorDefineSliders").on({mouseleave:function(){i(".colorDefineSliders").hide()}}),i(".colors").children().on({mouseleave:function(){i(".colorDefineSliders").is(":hover")||i(".colorDefineSliders").hide()}}),i(".funcWire").on("click",function(){i(this).toggleClass("btnOn"),f.led_strip.wireMode=i(this).hasClass("btnOn"),i(".mainGrid").toggleClass("gridWire")}),i(".funcWireClearSelect").on("click",function(){i(".ui-selected").each(function(){var c=i(this).find(".wire");c.html()!=""&&c.html(""),p()})}),i(".funcWireClear").on("click",function(){i(".gPoint .wire").html(""),p()}),i(".mainGrid").selectable({filter:" > div",stop:function(){var c=[];y();var o;i(".ui-selected").each(function(){for(var l=q(),d=0,d=0;d<l.length&&l[d]==d;d++);f.led_strip.wireMode&&i(this).find(".wire").html()==""&&d<r.LED_STRIP.length&&i(this).find(".wire").html(d),i(this).find(".wire").text()!=""&&(o=this,f.led_strip.directions.forEach(function(v){var S=".dir-"+v;i(o).is(S)&&c.push(S)}),f.led_strip.baseFuncs.forEach(function(v){var S=".function-"+v;i(o).is(S)}),f.led_strip.overlays.forEach(function(v){var S=".function-"+v;i(o).is(S)}))});var t=o;if(i("select.functionSelect").val(""),f.led_strip.baseFuncs.forEach(function(l){var d="function-"+l;i("select.functionSelect").is("."+d)&&i("select.functionSelect").removeClass(d)}),h=0,t){for(var a=0;a<16;a++){var _=".color-"+a;i(t).is(_)?(i(_).addClass("btnOn"),h=a):i(_).removeClass("btnOn")}f.led_strip.overlays.forEach(function(l){var d=i(".checkbox").find("input.function-"+l),v=i(t).is(".function-"+l);d.is(":checked")!=v&&(d.prop("checked",v),d.trigger("change"))}),f.led_strip.baseFuncs.forEach(function(l){i(t).is(".function-"+l)&&(i("select.functionSelect").val("function-"+l),i("select.functionSelect").addClass("function-"+l))})}p(),F(h),R(),i(".directions button").removeClass("btnOn"),c.forEach(function(l){i(l).addClass("btnOn")})}}),i(".functionSelect").on("change",function(){y(),B(),N(),R(),p()}),i(".modeSelect").on("change",function(){var c=this,o=Number(i(c).val());i(".mode_colors").find("button").each(function(){for(var t=0;t<6;t++)for(var a=0;a<6;a++)i(this).hasClass("mode_color-"+t+"-"+a)&&(i(this).removeClass("mode_color-"+t+"-"+a),i(this).addClass("mode_color-"+o+"-"+a))}),i(".mode_colors").each(function(){L(i(this))})});function g(c,o){return i(c).is(":checked")?i(".ui-selected").find(".wire").each(function(){if(i(this).text()!=""){var t=i(this).parent();f.led_strip.functions.forEach(function(a){if(t.is(".function-"+a))switch(o){case"t":case"o":case"s":A("function-"+a)&&t.addClass("function-"+o);break;case"b":case"e":case"n":G("function-"+a)&&t.addClass("function-"+o);break;case"i":T("function-"+a)&&t.addClass("function-"+o);break;case"w":T("function-"+a)&&H("function-"+a)&&t.addClass("function-"+o);break}})}}):i(".ui-selected").removeClass("function-"+o),i(c).is(":checked")}i(".checkbox").on("change",function(c){if(c.originalEvent){var o=i(this).find("input");i(".ui-selected").length>0&&(f.led_strip.overlays.forEach(function(t){if(i(o).is(".function-"+t)){var a=g(o,t),_=i(".checkbox .function-n"),l=i(".checkbox .function-b");a&&(t=="b"&&_.is(":checked")?(_.prop("checked",!1),_.trigger("change"),g(_,"n")):t=="n"&&l.is(":checked")&&(l.prop("checked",!1),l.trigger("change"),g(l,"b")))}}),y(),p(),R())}}),i(".mainGrid").disableSelection(),i(".gPoint").each(function(){var c=i(this).index()+1,o=Math.ceil(c/16)-1,t=c/16%1*16-1;t<0&&(t=15);var a=Z(t,o);if(a){var _=a.index,l=a.led;if(!(l.functions[0]=="c"&&l.functions.length==1&&l.directions.length==0&&l.color==0&&l.x==0&&l.y==0)){i(this).find(".wire").html(_);for(var d=0;d<l.functions.length;d++)i(this).addClass("function-"+l.functions[d]);for(var v=0;v<l.directions.length;v++)i(this).addClass("dir-"+l.directions[v]);i(this).addClass("color-"+l.color)}}}),i("a.save").on("click",function(){W.sendLedStripConfig(c);function c(){W.sendLedStripColors(o)}function o(){W.sendLedStripModeColors(t)}function t(){M.send_message(P.MSP_EEPROM_WRITE,!1,!1,function(){E.log(X.getMessage("ledStripEepromSaved"))})}}),i(".colorDefineSliders").hide(),B(),N(),R(),p(),E.content_ready(D)}function Z(e,n){for(var s=0;s<r.LED_STRIP.length;s++){var u=r.LED_STRIP[s];if(u.x==e&&u.y==n)return{index:s,led:u}}}function p(){var e=r.LED_STRIP.length;r.LED_COLORS.length,r.LED_MODE_COLORS.length,r.LED_STRIP=[],i(".gPoint").each(function(){if(i(this).is('[class*="function"]')){var g=i(this).index()+1,c=Math.ceil(g/16)-1,o=g/16%1*16-1;o<0&&(o=15);var t=i(this).find(".wire").html(),a="",_="",l=0,d=this,v=i(this).attr("class").match(/(^|\s)color-([0-9]+)(\s|$)/);if(v&&(l=v[2]),f.led_strip.baseFuncs.forEach(function(b){i(d).is(".function-"+b)&&(a+=b)}),f.led_strip.overlays.forEach(function(b){i(d).is(".function-"+b)&&(a+=b)}),f.led_strip.directions.forEach(function(b){i(d).is(".dir-"+b)&&(_+=b)}),t!=""){var S={x:o,y:c,directions:_,functions:a,color:l};r.LED_STRIP[t]=S}}});for(var n={x:0,y:0,directions:"",functions:""},s=0;s<e;s++)r.LED_STRIP[s]||(r.LED_STRIP[s]=n);var u=q(),m=r.LED_STRIP.length-u.length;i(".wires-remaining div").html(m)}function L(e){e.find('[class*="mode_color"]').each(function(){var n=0,s=0,u=i(this).attr("class").match(/(^|\s)mode_color-([0-9]+)-([0-9]+)(\s|$)/);u&&(n=Number(u[2]),s=Number(u[3]),i(this).css("background-color",V(r.LED_COLORS[$(n,s)])))})}function w(e){if(e.is('[class*="color"]')){var n=0,s=e.attr("class").match(/(^|\s)color-([0-9]+)(\s|$)/);s&&(n=s[2],e.css("background-color",V(r.LED_COLORS[n])))}}function A(e){switch(e){case"function-c":case"function-a":case"function-f":return!0}return!1}function T(e){switch(e){case"":case"function-c":case"function-a":case"function-f":case"function-s":case"function-l":case"function-r":case"function-o":case"function-g":return!0}return!1}function G(e){switch(e){case"function-c":case"function-a":case"function-f":case"function-e":return!0}return!1}function H(e){switch(e){case"function-l":case"function-s":case"function-g":case"function-r":case"function-b":return!1;default:return!0}}function R(){var e=i("select.functionSelect").val();switch(i("select.functionSelect").addClass(e),i(".extra_functions20").show(),i(".mode_colors").show(),i(".overlays").hide(),i(".modifiers").hide(),i(".blinkers").hide(),i(".warningOverlay").hide(),i(".channel_info").hide(),T(e)&&i(".overlays").show(),A(e)&&i(".modifiers").show(),G(e)&&i(".blinkers").show(),H(e)&&i(".warningOverlay").show(),i(".mode_colors").hide(),e=="function-f"&&i(".mode_colors").show(),i(".special_colors").show(),i(".mode_color-6-0").hide(),i(".mode_color-6-1").hide(),i(".mode_color-6-2").hide(),i(".mode_color-6-3").hide(),i(".mode_color-6-4").hide(),i(".mode_color-6-5").hide(),i(".mode_color-6-6").hide(),i(".mode_color-6-7").hide(),e){case"":case"function-f":case"function-l":i(".special_colors").hide();break;case"function-g":i(".mode_color-6-5").show(),i(".mode_color-6-6").show(),i(".mode_color-6-7").show();break;case"function-b":i(".mode_color-6-4").show();break;case"function-a":i(".mode_color-6-0").show(),i(".mode_color-6-1").show();break;case"function-h":i(".special_colors").hide(),i(".channel_info").show();break;case"function-r":default:i(".special_colors").hide();break}}function B(){var e=i("select.functionSelect").val();f.led_strip.baseFuncs.forEach(function(n){e=="function-"+n?(i("select.functionSelect").addClass("function-"+n),i(".ui-selected").find(".wire").each(function(){i(this).text()!=""&&i(this).parent().addClass("function-"+n)}),U(n)):(i("select.functionSelect").removeClass("function-"+n),i(".ui-selected").removeClass("function-"+n)),e==""&&U(e)})}function U(e){(e=="r"||e=="")&&(O(e,"o"),O(e,"b"),O(e,"n"),O(e,"t")),(e=="l"||e=="g"||e=="s")&&(O(e,"w"),O(e,"t"),O(e,"o"),O(e,"b"),O(e,"n"))}function O(e,n){i("input.function-"+n).prop("checked",!1),i("input.function-"+n).trigger("change"),i(".ui-selected").each(function(){(e==""||i(this).is(".function-"+e))&&i(this).removeClass("function-"+n)})}function k(e,n){var s=!1;e=Number(e);var u=".color-"+h;if(i(u).hasClass("btnOn"))switch(n){case 0:r.LED_COLORS[h].h!=e&&(r.LED_COLORS[h].h=e,i(".colorDefineSliderValue.Hvalue").text(r.LED_COLORS[h].h),s=!0);break;case 1:r.LED_COLORS[h].s!=e&&(r.LED_COLORS[h].s=e,i(".colorDefineSliderValue.Svalue").text(r.LED_COLORS[h].s),s=!0);break;case 2:r.LED_COLORS[h].v!=e&&(r.LED_COLORS[h].v=e,i(".colorDefineSliderValue.Vvalue").text(r.LED_COLORS[h].v),s=!0);break}i(".colors").children().each(function(){w(i(this))}),i(".overlay-color").each(function(){w(i(this))}),i(".mode_colors").each(function(){L(i(this))}),i(".special_colors").each(function(){L(i(this))}),s&&p()}function N(){i(".gPoint").each(function(){if(i(this).is(".function-c")||i(this).is(".function-r")||i(this).is(".function-b")){i(this).find(".overlay-color").show();for(var e=0;e<16;e++){var n="color-"+e;i(this).is("."+n)?(i(this).find(".overlay-color").addClass(n),i(this).find(".overlay-color").css("background-color",V(r.LED_COLORS[e]))):i(this).find(".overlay-color").is("."+n)&&i(this).find(".overlay-color").removeClass(n)}}else i(this).find(".overlay-color").hide()})}function F(e){var n=i("div.colorDefineSliders input"),s=!1;r.LED_COLORS[e]&&(r.LED_COLORS[e].h!=Number(n.eq(0).val())&&(n.eq(0).val(r.LED_COLORS[e].h),i(".colorDefineSliderValue.Hvalue").text(r.LED_COLORS[e].h),s=!0),r.LED_COLORS[e].s!=Number(n.eq(1).val())&&(n.eq(1).val(r.LED_COLORS[e].s),i(".colorDefineSliderValue.Svalue").text(r.LED_COLORS[e].s),s=!0),r.LED_COLORS[e].v!=Number(n.eq(2).val())&&(n.eq(2).val(r.LED_COLORS[e].v),i(".colorDefineSliderValue.Vvalue").text(r.LED_COLORS[e].v),s=!0),s&&n.trigger("input"))}function V(e){if(e==null)return"";var n={h:Number(e.h),s:Number(e.s),v:Number(e.v)};if(n.s==0&&n.v==0)return"";n={h:n.h,s:1-n.s/255,v:n.v/255};var s={h:0,s:0};s.h=n.h,s.l=(2-n.s)*n.v/2,s.s=s.l&&s.l<1?n.s*n.v/(s.l<.5?s.l*2:2-s.l*2):s.s;var u="hsl("+s.h+", "+s.s*100+"%, "+s.l*100+"%)";return u}function $(e,n){for(var s=0;s<r.LED_MODE_COLORS.length;s++){var u=r.LED_MODE_COLORS[s];if(u.mode==e&&u.direction==n)return u.color}return""}function j(e,n,s){for(var u=0;u<r.LED_MODE_COLORS.length;u++){var m=r.LED_MODE_COLORS[u];if(m.mode==e&&m.direction==n)return m.color=s,1}return 0}function y(){C=null,i(".mode_colors").each(function(){i(this).children().each(function(){i(this).is(".btnOn")&&i(this).removeClass("btnOn")})})}};f.led_strip.cleanup=function(D){D&&D()};
